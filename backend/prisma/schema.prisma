generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model users {
  id              Int       @id @default(autoincrement())
  username        String    @unique @db.VarChar(50)
  password        String
  full_name       String    @db.VarChar(100)
  identity_number String?   @unique @db.VarChar(20)
  role            String    @db.VarChar(20)
  is_active       Boolean?  @default(true)
  created_at      DateTime? @default(now()) @db.Timestamp(6)
  updated_at      DateTime? @default(now()) @db.Timestamp(6)
}

model SchoolProfile {
  id              Int      @id @default(1)
  schoolName      String   @map("school_name")
  npsn            String
  schoolStatus    String   @map("school_status")
  level           String
  principalName   String   @map("principal_name")
  principalNip    String   @map("principal_nip")
  accreditation   String
  curriculum      String
  establishedYear Int      @map("established_year")
  licenseNumber   String   @map("license_number")
  email           String
  phone           String
  address         String   @db.Text
  province        String?  // Tambahan
  city            String?  // Tambahan
  district        String?  // Tambahan
  postalCode      String?  @map("postal_code")
  schoolLogo      String?  @map("school_logo")
  foundationLogo  String?  @map("foundation_logo")
  buildingPhoto   String?  @map("building_photo")
  socialLinks     String[] @map("social_links")
  updatedAt       DateTime @updatedAt @map("updated_at")

  @@map("school_profiles")
}

model AuditLog {
  id          Int      @id @default(autoincrement())
  userId      Int      @map("user_id")
  username    String   @db.VarChar(100)
  role        String   @db.VarChar(20)
  action      String   @db.VarChar(255)
  oldData     Json?    @map("old_data")
  newData     Json?    @map("new_data")
  ipAddress   String?  @map("ip_address") @db.VarChar(45)
  createdAt   DateTime @default(now()) @map("created_at")

  @@map("audit_logs")
}